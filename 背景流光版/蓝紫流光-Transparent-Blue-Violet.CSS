/* 加强版蓝紫色主题 - 修正透明度匹配红色流光 */
/* 背景图片与主容器样式 */
.css-1li7dvq,
.css-l3ykv8,
body,
html {
    background: url('https://i.postimg.cc/wMpwFMcX/illust-107335180-20231015-190436.png') fixed center/cover !important;
    position: relative;
    z-index: 0;
    overflow-x: hidden !important;
}

/* 基础滚动修复 - 防止页面水平滚动 */
.css-1li7dvq,
.css-l3ykv8,
body,
html {
    overflow-x: hidden !important;
}

/* 左侧工具栏滚动条修复 - 匹配主题风格 */
[class*="nav"], [class*="sidebar"], [class*="menu"] {
    overflow-y: auto !important;
    overflow-x: hidden !important;
}

/* 自定义工具栏滚动条样式 - 蓝紫色 */
[class*="nav"]::-webkit-scrollbar,
[class*="sidebar"]::-webkit-scrollbar,
[class*="menu"]::-webkit-scrollbar {
    width: 4px !important;
}
[class*="nav"]::-webkit-scrollbar-track,
[class*="sidebar"]::-webkit-scrollbar-track,
[class*="menu"]::-webkit-scrollbar-track {
    background: rgba(8, 5, 25, 0.2) !important;
    border-radius: 2px;
}
[class*="nav"]::-webkit-scrollbar-thumb,
[class*="sidebar"]::-webkit-scrollbar-thumb,
[class*="menu"]::-webkit-scrollbar-thumb {
    background: rgba(70, 50, 180, 0.4) !important;
    border-radius: 2px;
}
[class*="nav"]::-webkit-scrollbar-thumb:hover,
[class*="sidebar"]::-webkit-scrollbar-thumb:hover,
[class*="menu"]::-webkit-scrollbar-thumb:hover {
    background: rgba(100, 70, 220, 0.6) !important;
}

/* 防止容器内容溢出导致额外滚动条 */
[class*="container"], [class*="wrapper"] {
    overflow: hidden !important;
}

/* 深色叠加层 - 匹配红色流光的透明度 */
.css-l3ykv8::before {
    content: "";
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: linear-gradient(135deg, 
        rgba(5, 3, 15, 0.6) 0%, 
        rgba(25, 15, 70, 0.4) 50%, 
        rgba(15, 8, 45, 0.7) 100%);
    z-index: 1;
}

/* 主内容容器 - 匹配红色流光的透明度 */
.css-1li7dvq > *, .css-l3ykv8 > * {
    position: relative;
    z-index: 2;
    background: rgba(15, 8, 35, 0.35) !important;
    border: 1px solid rgba(90, 70, 200, 0.45) !important;
    border-radius: 8px;
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.25);
    transition: all 0.3s ease;
}

/* 大组件悬停效果 - 匹配红色流光的透明度 */
.css-1li7dvq > *:hover,
.css-l3ykv8 > *:hover {
    background: rgba(25, 15, 60, 0.5) !important;
    border-color: rgba(140, 110, 255, 0.8) !important;
    transform: translateY(-2px);
    box-shadow: 0 6px 20px rgba(0, 0, 0, 0.4) !important;
}

/* 选中状态 - 匹配红色流光的透明度 */
.css-1li7dvq > *[class*="selected"],
.css-l3ykv8 > *[class*="selected"],
.css-1li7dvq > *[class*="active"],
.css-l3ykv8 > *[class*="active"] {
    border: 2px solid rgba(180, 160, 255, 0.9) !important;
    box-shadow: 
        0 0 25px rgba(140, 110, 255, 0.7),
        0 0 40px rgba(120, 90, 240, 0.4) !important;
    background: rgba(35, 20, 80, 0.6) !important;
    animation: selectedPulseDeepBlue 2s infinite ease-in-out !important;
    z-index: 100 !important;
}

@keyframes selectedPulseDeepBlue {
    0%, 100% { 
        box-shadow: 
            0 0 25px rgba(140, 110, 255, 0.7),
            0 0 40px rgba(120, 90, 240, 0.4);
    }
    50% { 
        box-shadow: 
            0 0 35px rgba(160, 130, 255, 0.9),
            0 0 55px rgba(140, 110, 255, 0.6);
    }
}

/* 测试按钮组 */
[class*="test"], [class*="website-test"],
[class*="button-group"] {
    display: flex !important;
    flex-direction: row !important;
    gap: 12px !important;
    justify-content: center !important;
}

/* 测试按钮样式 - 匹配红色流光的透明度 */
[class*="test-button"], [class*="website-button"],
button[class*="test"], button[class*="website"] {
    flex: 1;
    min-width: 120px;
    background: rgba(20, 10, 50, 0.5) !important;
    border: 1px solid rgba(90, 70, 200, 0.5) !important;
    border-radius: 6px;
    padding: 12px 16px;
    text-align: center;
    transition: all 0.3s ease;
    position: relative;
    overflow: hidden;
}

/* 测试按钮悬停效果 - 蓝紫色流光效果 */
[class*="test-button"]:hover, [class*="website-button"]:hover,
button[class*="test"]:hover, button[class*="website"]:hover {
    background: rgba(30, 15, 70, 0.7) !important;
    border-color: rgba(140, 110, 255, 0.9) !important;
    transform: translateY(-3px) scale(1.05);
    box-shadow: 
        0 5px 15px rgba(0, 0, 0, 0.3),
        0 0 15px rgba(100, 70, 220, 0.5) !important;
}

/* 蓝紫色流光效果 */
[class*="test-button"]:hover::before, [class*="website-button"]:hover::before,
button[class*="test"]:hover::before, button[class*="website"]:hover::before {
    content: "";
    position: absolute;
    top: 0;
    left: -100%;
    width: 100%;
    height: 100%;
    background: linear-gradient(
        90deg,
        transparent,
        rgba(100, 70, 220, 0.3),
        rgba(140, 110, 255, 0.5),
        rgba(100, 70, 220, 0.3),
        transparent
    );
    animation: buttonFlow 1s ease-in-out;
    z-index: -1;
}

@keyframes buttonFlow {
    0% {
        left: -100%;
    }
    100% {
        left: 100%;
    }
}

/* 测试按钮选中状态 - 匹配红色流光的透明度 */
[class*="test-button"][class*="selected"],
[class*="website-button"][class*="selected"],
[class*="test-button"][class*="active"], 
[class*="website-button"][class*="active"] {
    border: 2px solid rgba(180, 160, 255, 0.95) !important;
    box-shadow: 
        0 0 20px rgba(160, 130, 255, 0.7),
        0 0 35px rgba(140, 110, 255, 0.4) !important;
    background: rgba(40, 20, 90, 0.7) !important;
}

/* 开关按钮样式 - 匹配红色流光的透明度 */
[class*="proxy"], [class*="system-proxy"],
.MuiSwitch-root, [role="switch"] {
    background: rgba(18, 9, 45, 0.6) !important;
    border: 1px solid rgba(90, 70, 200, 0.5) !important;
    border-radius: 8px;
    padding: 12px 16px;
    margin: 8px 0;
    transition: all 0.3s ease;
    position: relative;
    overflow: hidden;
}

/* 开关悬停效果 - 蓝紫色流光效果 */
[class*="proxy"]:hover, [class*="system-proxy"]:hover,
.MuiSwitch-root:hover, [role="switch"]:hover {
    border-color: rgba(140, 110, 255, 0.8) !important;
    transform: scale(1.03);
    box-shadow: 0 0 15px rgba(100, 70, 220, 0.4) !important;
}

[class*="proxy"]:hover::before, [class*="system-proxy"]:hover::before,
.MuiSwitch-root:hover::before, [role="switch"]:hover::before {
    content: "";
    position: absolute;
    top: 0;
    left: -100%;
    width: 100%;
    height: 100%;
    background: linear-gradient(
        90deg,
        transparent,
        rgba(100, 70, 220, 0.2),
        rgba(140, 110, 255, 0.4),
        rgba(100, 70, 220, 0.2),
        transparent
    );
    animation: switchFlow 1.2s ease-in-out;
    z-index: -1;
}

@keyframes switchFlow {
    0% {
        left: -100%;
    }
    100% {
        left: 100%;
    }
}

/* 开关轨道和滑块 - 匹配红色流光的透明度 */
.MuiSwitch-track {
    background: rgba(80, 60, 180, 0.6) !important;
    transition: all 0.3s ease;
}

.MuiSwitch-thumb {
    background: rgba(160, 140, 240, 0.85) !important;
    transition: all 0.3s ease;
}

.Mui-checked + .MuiSwitch-track {
    background: rgba(180, 160, 255, 0.7) !important;
    box-shadow: 
        0 0 10px rgba(160, 130, 255, 0.5),
        inset 0 0 5px rgba(200, 180, 255, 0.3) !important;
}

.Mui-checked .MuiSwitch-thumb {
    background: rgba(200, 180, 255, 0.95) !important;
    box-shadow: 
        0 0 15px rgba(180, 160, 255, 0.8),
        0 0 25px rgba(200, 180, 255, 0.4) !important;
    transform: scale(1.15);
}

/* 全局透明 */
* { background-color: transparent !important; }

/* 设置面板 - 匹配红色流光的透明度 */
[class*="settings"], [class*="panel"],
[class*="config"], [class*="control"] {
    background: rgba(15, 8, 35, 0.5) !important;
    border: 1px solid rgba(90, 70, 200, 0.45) !important;
    border-radius: 8px;
    padding: 15px;
    margin: 10px 0;
    transition: all 0.3s ease;
}

/* 设置面板悬停效果 */
[class*="settings"]:hover, [class*="panel"]:hover,
[class*="config"]:hover, [class*="control"]:hover {
    border-color: rgba(140, 110, 255, 0.7) !important;
    transform: translateY(-2px);
    box-shadow: 0 6px 18px rgba(0, 0, 0, 0.35) !important;
}

/* 状态指示器 - 匹配红色流光的透明度 */
[class*="status"], [class*="connected"] {
    background: rgba(18, 9, 45, 0.6) !important;
    border: 1px solid rgba(90, 70, 200, 0.45) !important;
    border-radius: 4px;
    padding: 4px 8px;
    font-weight: 600;
    transition: all 0.3s ease;
}

/* 连接状态 */
[class*="connected"] {
    border-color: rgba(140, 110, 255, 0.6) !important;
    box-shadow: 0 0 10px rgba(100, 70, 220, 0.4) !important;
    color: rgba(200, 180, 255, 0.9) !important;
}

/* 表格样式 - 匹配红色流光的透明度 */
table, tr, td, th {
    background: rgba(10, 5, 25, 0.15) !important;
    border-color: rgba(70, 50, 160, 0.25) !important;
}

/* 表格行悬停效果 - 蓝紫色流光效果 */
tr {
    position: relative;
    overflow: hidden;
    transition: all 0.3s ease;
}

tr:hover {
    background: rgba(22, 12, 55, 0.35) !important;
    transform: translateX(3px);
    box-shadow: 0 0 10px rgba(100, 70, 220, 0.3) !important;
}

tr:hover::before {
    content: "";
    position: absolute;
    top: 0;
    left: -100%;
    width: 100%;
    height: 100%;
    background: linear-gradient(
        90deg,
        transparent,
        rgba(100, 70, 220, 0.2),
        rgba(140, 110, 255, 0.3),
        rgba(100, 70, 220, 0.2),
        transparent
    );
    animation: rowFlow 1.5s ease-in-out;
    z-index: -1;
}

@keyframes rowFlow {
    0% {
        left: -100%;
    }
    100% {
        left: 100%;
    }
}

/* 表格行选中状态 - 匹配红色流光的透明度 */
tr[class*="selected"],
tr[class*="active"] {
    background: rgba(28, 15, 65, 0.5) !important;
    border-left: 4px solid rgba(180, 160, 255, 0.9) !important;
    box-shadow: 
        0 0 15px rgba(160, 130, 255, 0.5),
        inset 0 0 10px rgba(140, 110, 255, 0.1) !important;
}

/* 文字样式 - 匹配红色流光的透明度 */
.text-primary, .title, h1, h2, h3, h4, h5, h6 {
    color: rgba(230, 220, 255, 0.95) !important;
    text-shadow: 0 1px 3px rgba(0, 0, 0, 0.9);
    transition: all 0.3s ease;
}

.text-primary:hover, .title:hover, h1:hover, h2:hover, h3:hover, h4:hover, h5:hover, h6:hover {
    color: rgba(200, 180, 255, 0.95) !important;
    text-shadow: 
        0 0 15px rgba(140, 110, 255, 0.8),
        0 0 30px rgba(120, 90, 240, 0.5) !important;
    transform: translateY(-2px) scale(1.05);
}

.text-primary[class*="selected"], .title[class*="selected"] {
    color: rgba(220, 200, 255, 0.98) !important;
    text-shadow: 
        0 0 20px rgba(200, 180, 255, 0.9),
        0 0 35px rgba(180, 160, 255, 0.6) !important;
    animation: textGlowDeepBlue 2s infinite alternate !important;
}

@keyframes textGlowDeepBlue {
    0% {
        text-shadow: 
            0 0 20px rgba(200, 180, 255, 0.9),
            0 0 35px rgba(180, 160, 255, 0.6);
    }
    100% {
        text-shadow: 
            0 0 25px rgba(220, 200, 255, 1),
            0 0 45px rgba(200, 180, 255, 0.8);
    }
}

.text-secondary, p, span {
    color: rgba(210, 200, 240, 0.85) !important;
}

/* 按钮样式 - 蓝紫色流光效果 */
button, .btn, [role="button"] {
    background: rgba(25, 12, 60, 0.45) !important;
    border: 1px solid rgba(90, 70, 200, 0.5) !important;
    color: rgba(240, 230, 255, 0.9) !important;
    border-radius: 6px;
    transition: all 0.3s ease;
    position: relative;
    overflow: hidden;
}

button:hover, .btn:hover, [role="button"]:hover {
    background: rgba(35, 18, 80, 0.65) !important;
    border-color: rgba(140, 110, 255, 0.9) !important;
    transform: translateY(-3px) scale(1.05);
    box-shadow: 
        0 5px 15px rgba(0, 0, 0, 0.3),
        0 0 15px rgba(100, 70, 220, 0.5) !important;
}

button:hover::before, .btn:hover::before, [role="button"]:hover::before {
    content: "";
    position: absolute;
    top: 0;
    left: -100%;
    width: 100%;
    height: 100%;
    background: linear-gradient(
        90deg,
        transparent,
        rgba(100, 70, 220, 0.3),
        rgba(140, 110, 255, 0.5),
        rgba(100, 70, 220, 0.3),
        transparent
    );
    animation: generalButtonFlow 1s ease-in-out;
    z-index: -1;
}

@keyframes generalButtonFlow {
    0% {
        left: -100%;
    }
    100% {
        left: 100%;
    }
}

button[class*="selected"], .btn[class*="selected"], [role="button"][class*="selected"] {
    border: 2px solid rgba(180, 160, 255, 0.95) !important;
    box-shadow: 
        0 0 20px rgba(160, 130, 255, 0.7),
        0 0 35px rgba(140, 110, 255, 0.4) !important;
    background: rgba(45, 22, 100, 0.7) !important;
}

/* 输入框 - 匹配红色流光的透明度 */
input, textarea, select {
    background: rgba(15, 8, 35, 0.25) !important;
    border: 1px solid rgba(90, 70, 200, 0.35) !important;
    color: rgba(240, 230, 255, 0.85) !important;
    border-radius: 6px;
    transition: all 0.3s ease;
}

input:focus, textarea:focus, select:focus {
    border-color: rgba(140, 110, 255, 0.9) !important;
    box-shadow: 
        0 0 20px rgba(100, 70, 220, 0.6),
        inset 0 0 8px rgba(140, 110, 255, 0.2) !important;
    background: rgba(22, 11, 55, 0.35) !important;
    transform: scale(1.03);
}

/* 滚动条 - 匹配红色流光的透明度 */
::-webkit-scrollbar {
    width: 8px;
}

::-webkit-scrollbar-track {
    background: rgba(10, 5, 25, 0.25);
}

::-webkit-scrollbar-thumb {
    background: rgba(90, 70, 200, 0.5);
    border-radius: 4px;
    transition: all 0.3s ease;
}

::-webkit-scrollbar-thumb:hover {
    background: rgba(140, 110, 255, 0.8) !important;
    box-shadow: 0 0 10px rgba(100, 70, 220, 0.5);
}

/* 特殊元素 - 匹配红色流光的透明度 */
[class*="speed"], [class*="download"], [class*="upload"] {
    color: rgba(180, 160, 255, 0.9) !important;
    font-weight: 600;
    text-shadow: 0 0 8px rgba(100, 70, 220, 0.5);
}

[class*="待检测"] {
    color: rgba(180, 160, 255, 0.85) !important;
    font-weight: 600;
    animation: blink 2s infinite;
    position: relative;
}

[class*="待检测"]::after {
    content: "✦";
    position: absolute;
    right: -15px;
    top: 50%;
    transform: translateY(-50%);
    color: rgba(160, 140, 240, 0.7);
    animation: spin 2s infinite linear;
}

@keyframes blink {
    0%, 100% { opacity: 1; }
    50% { opacity: 0.7; }
}

@keyframes spin {
    0% { transform: translateY(-50%) rotate(0deg); }
    100% { transform: translateY(-50%) rotate(360deg); }
}

/* 强制透明覆盖 */
[style*="background:"]:not([style*="url"]),
[style*="background-color"]:not([style*="rgba(0,0,0"]) {
    background: transparent !important;
}

/* === 订阅标签图标隐藏修复 === */
svg.MuiSvgIcon-root.MuiSvgIcon-fontSizeMedium.css-14vn3vf {
    display: none !important;
    visibility: hidden !important;
    width: 0 !important;
    height: 0 !important;
    opacity: 0 !important;
}

[class*="subscription"] svg.MuiSvgIcon-root,
[class*="account"] svg.MuiSvgIcon-root,
[class*="user"] svg.MuiSvgIcon-root {
    display: none !important;
}

[class*="subscription"] > div,
[class*="account"] > div,
[class*="user"] > div {
    display: flex !important;
    align-items: center !important;
    gap: 0 !important;
}

[class*="subscription"] span:first-of-type,
[class*="account"] span:first-of-type,
[class*="user"] span:first-of-type {
    margin-left: 0 !important;
    padding-left: 0 !important;
}

/* 修复所有可能遗漏的非透明背景 */
[style*="background-color"]:not([style*="transparent"]):not([style*="rgba(0,0,0,0"]):not(.css-1li7dvq):not(.css-l3ykv8) {
    background-color: rgba(12, 6, 30, 0.3) !important;
}

/* 强制修复所有白色或浅色背景 */
[style*="background: white"],
[style*="background: #fff"],
[style*="background: #ffffff"],
[style*="background-color: white"],
[style*="background-color: #fff"],
[style*="background-color: #ffffff"] {
    background: rgba(15, 8, 35, 0.4) !important;
}

/* === 通用订阅卡片布局修复 === */
/* 确保订阅卡片的选中状态边框完整显示 */
.css-1ow8u3y[aria-selected="true"],
.css-1rgmi2n[aria-selected="true"] {
    border: 2px solid var(--selected-color, rgba(65, 105, 225, 0.9)) !important;
    box-shadow: 
        0 0 15px var(--selected-glow, rgba(65, 105, 225, 0.6)),
        0 0 25px var(--selected-shadow, rgba(65, 105, 225, 0.3)) !important;
    background: var(--selected-bg, rgba(22, 11, 55, 0.6)) !important;
    margin: -1px !important;
    position: relative !important;
    z-index: 10 !important;
}

/* 确保选中卡片在容器内完整显示 */
.css-83xgas {
    overflow: visible !important;
    position: relative !important;
}

/* 修复卡片容器布局 */
.css-1ymo5jj {
    padding: 8px !important;
    overflow: visible !important;
}

/* 确保卡片内容不被边框遮挡 */
.css-1ow8u3y,
.css-1rgmi2n {
    position: relative !important;
    overflow: visible !important;
}

/* === 订阅页面拖拽图标显示修复 - 精确版本 === */
/* 强制显示订阅页面中的拖拽图标 */
.base-page .css-mdbbsh .MuiSvgIcon-root.MuiSvgIcon-fontSizeMedium,
.base-page [role="button"][aria-roledescription="sortable"] .MuiSvgIcon-root,
.base-page .MuiSvgIcon-root.MuiSvgIcon-fontSizeMedium[class*="css-"] {
    display: block !important;
    visibility: visible !important;
    opacity: 1 !important;
    margin-left: 0 !important;
    margin-right: 3px !important;
    width: 20px !important;
    height: 20px !important;
    min-width: 20px !important;
    min-height: 20px !important;
    color: rgba(255, 255, 255, 0.9) !important;
    filter: drop-shadow(0 0 3px rgba(180, 160, 255, 0.8)) !important;
}

/* 确保拖拽图标容器正确显示 */
.base-page .css-mdbbsh,
.base-page [role="button"][aria-roledescription="sortable"] {
    display: flex !important;
    align-items: center !important;
    justify-content: center !important;
    margin-left: 0 !important;
    padding-left: 0 !important;
    width: auto !important;
    min-width: auto !important;
    visibility: visible !important;
    opacity: 1 !important;
}

/* 修复订阅卡片标题布局 */
.base-page .css-8owaep {
    display: flex !important;
    align-items: center !important;
    gap: 6px !important;
    margin-left: 0 !important;
    padding-left: 0 !important;
}

/* 确保标题文本与图标比例协调 */
.base-page .css-9inqwp {
    margin-left: 0 !important;
    padding-left: 0 !important;
    flex: 1 !important;
    font-size: 1.1em !important;
    color: rgba(230, 220, 255, 0.95) !important;
}

/* 拖拽图标悬停效果 */
.base-page .css-mdbbsh:hover .MuiSvgIcon-root,
.base-page [role="button"][aria-roledescription="sortable"]:hover .MuiSvgIcon-root {
    color: rgba(200, 180, 255, 1) !important;
    filter: drop-shadow(0 0 5px rgba(200, 180, 255, 1)) !important;
    transform: scale(1.1) !important;
    transition: all 0.2s ease !important;
}

/* 强制覆盖任何可能隐藏拖拽图标的规则 */
.base-page .MuiSvgIcon-root {
    display: block !important;
    visibility: visible !important;
    opacity: 1 !important;
}

/* 特别确保拖拽功能图标的显示 */
.base-page [role="button"][aria-roledescription="sortable"] svg {
    display: block !important;
    visibility: visible !important;
    opacity: 1 !important;
}

/* === 增强版蓝紫色背景流光效果 === */
.css-l3ykv8::after {
    content: "";
    position: absolute;
    top: -50%;
    left: -50%;
    width: 200%;
    height: 200%;
    background: linear-gradient(
        45deg,
        transparent 15%,
        rgba(100, 70, 220, 0.25) 30%,
        rgba(140, 110, 255, 0.4) 45%,
        rgba(160, 130, 255, 0.6) 50%,
        rgba(140, 110, 255, 0.4) 55%,
        rgba(100, 70, 220, 0.25) 70%,
        transparent 85%
    );
    animation: blueVioletShine 3s infinite linear;
    z-index: 1;
    opacity: 0.8;
    pointer-events: none;
}

@keyframes blueVioletShine {
    0% { transform: translateX(-100%) translateY(-100%) rotate(45deg); }
    100% { transform: translateX(100%) translateY(100%) rotate(45deg); }
}

/* 添加第二层流光增强效果 */
.css-l3ykv8::before {
    background: 
        radial-gradient(
            circle at 20% 80%,
            rgba(100, 70, 220, 0.2) 0%,
            transparent 50%
        ),
        radial-gradient(
            circle at 80% 20%,
            rgba(120, 90, 255, 0.15) 0%,
            transparent 50%
        ),
        radial-gradient(
            circle at 40% 40%,
            rgba(80, 60, 200, 0.18) 0%,
            transparent 50%
        ),
        linear-gradient(135deg, 
            rgba(5, 3, 15, 0.6) 0%, 
            rgba(25, 15, 70, 0.4) 50%, 
            rgba(15, 8, 45, 0.7) 100%);
}

/* 添加背景脉动动画增强流光效果 */
.css-l3ykv8::before {
    animation: backgroundPulse 8s infinite ease-in-out;
}

@keyframes backgroundPulse {
    0%, 100% { 
        opacity: 0.7;
    }
    50% { 
        opacity: 0.9;
    }
}